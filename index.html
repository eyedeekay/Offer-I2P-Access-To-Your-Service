<h1 id="how-to-offer-your-existing-web-site-as-an-i2p-eepsite">How to offer your existing Web Site as an I2P eepSite</h1>
<p>A somewhat meta-tutorial and guided tour of mirroring a clear-web site to I2P. Unfortunately, it's probably impossible to <em>completely</em> cover all possible cases of making an existing web site available as an eepSite, there's simply too diverse an array of server-side software, not to mention the in-practice peculiarities of any particular deployment of software. Instead, I'm going to try and convey, as specifically as possible, the general process preparing a service for deployment to the eepWeb or other hidden services.</p>
<p>Much of this guide will be treating the reader as a conversational participant, in particular If I really mean it I will address the reader directly(i.e. using &quot;you&quot; instead of &quot;one&quot;) and I'll frequently head sections with questions I think the reader might be asking. This is, after all, a &quot;process&quot; that an administrator must consider themselves &quot;involved&quot; in just like hosting any other service.</p>
<p><a href="/FAQ/">FAQ for/From SyaAdmins</a></p>
<h2 id="disclaimers">DISCLAIMERS:</h2>
<p>While it would be wonderful, it's probably impossible for me to put specific instructions for every single kind of software that one might use to host web sites. As such, this tutorial requires some assumptions on the part of the writer and some critical thinking and common sense on the part of the reader. To be clear, <strong>I have assumed that the person following this tutorial is</strong> <strong>already operating a clear-web service linkable to a real identity or</strong> <strong>organization</strong> and thus is simply offering anonymous access and not anonymizing themselves.</p>
<p>Thus, <strong>it makes no attempt whatsoever to anonymize</strong> a connection from one server to another. If you want to run a new, un-linkable hidden service that makes server-to-server connections, additional steps will be required and will be covered in another tutorial.</p>
<p>That said: If you can be sure that a <em>brand new service</em> which is <em>not</em> <em>available to the clear-web</em> will never make a server-to-server connection and will not leak server metadata in responses to clients, then services configured in this way will be anonymous.</p>
<h2 id="process-one-prepare-your-server">Process One: Prepare your Server</h2>
<h3 id="step-one-determine-what-software-you-are-running">Step one: Determine what software you are running</h3>
<p>In practice, your web service probably uses a number of things to enhance it's reliability and security. These things could be proxies, reverse proxies, containers, tunnels, Intrusion Detection Systems, rate-limiters, load balancers, among many other things. When you get started, you should go through your deployment and determine which software you are using, and what you are using it for.</p>
<h4 id="as-you-examine-your-software-ask-yourself-these-questions">As you examine your software, ask yourself these questions</h4>
<p>These questions should help you evaluate what parts of your software stack are relevant to your I2P eepSite.</p>
<h5 id="does-this-software-work-based-on-ip-addresses">Does this software work based on IP addresses?</h5>
<p>If you are using software which alters the behavior of traffic based on the IP address of the sender, these things will probably not work with I2P, or may work in complicated or unexpected ways. This is because the address will usually be the localhost, or at least the host where your I2P router is running. Software which sometimes does things based on IP addresses could be Fail2Ban, iptables, and similar applications.</p>
<h5 id="does-this-software-work-by-tagging-traffic-with-additional-metadata">Does this software work by &quot;Tagging&quot; traffic with additional metadata?</h5>
<p>Some software may be configured to add information to the traffic it handles. Obviously, if this information is identifying it should not be part of the chain of services that is exposed to the I2P network.</p>
<h5 id="does-this-software-work-by-communicating-with-a-remote-resource-what-triggers-this-behavior">Does this software work by communicating with a remote resource? What triggers this behavior?</h5>
<p>Some software may also draw from remote resources, to find up-to-date rules and block lists which can be used to prevent attacks. Some of these might be useful as part of the service that is exposed to I2P, but you should make sure that the rules are applicable and that a rules update cannot be triggered as a result of a normal client request. This would create a server-to-server communication which could reveal the timing of an I2P communication to a third party.</p>
<h3 id="step-two-determine-which-port-to-forward-to-i2p-and-optionallly-locate-your-tls-certificate">Step two: Determine which port to Forward to I2P and Optionallly locate your TLS certificate</h3>
<p>Now you've gathered all the information that you will require to forward your service to I2P. Once you've selected the point at which you would like to make your site available to I2P, you will need to note the port you wish to foward. In simple scenarios, this will probably just be port 80 or port 8080. In more sophisticated scenarios, this might be a reverse proxy or something like that. Make a note of the port.</p>
<h4 id="establishing-a-common-identity-for-both-the-clearnet-and-your-eepsite">Establishing a Common Identity for both the Clearnet and your eepSite</h4>
<p>Should you be a non-anonymous organization that wishes to provide enhanced privacy to your users by providing a hidden service, you may wish to establish a common identity between versions of your site. However, since we can't add <a href="/IDENTITY/tls.html">.I2P domains to clearnet TLS certificates</a>, we have to do this in another way. To do this, <strong>even if you are forwarding the HTTP port</strong>' <strong>and not HTTPS</strong>, make a note of the location of your TLS certificate for use in the final step.</p>
<h2 id="process-two-forward-your-service-to-an-eepsite">Process Two: Forward your service to an eepSite</h2>
<p>Congratulations! You've completed the most difficult part. From here on, the decisions you must make, and the consequences that they will have, are much more straightforward and easy to enumerate. Such is the beauty of a cryptographically secure network layer like I2P!</p>
<h3 id="step-three-generate-your-i2p-tunnels-and-addresses">Step three: Generate your I2P Tunnels and Addresses</h3>
<h4 id="create-an-http-tunnel-for-your-application">Create an HTTP Tunnel for your application</h4>
<h4 id="create-an-http-proxy-for-your-applicationoptional">Create an HTTP proxy for your application(Optional)</h4>
<h3 id="step-four-publicize-and-authenticate-your-eepsite">Step four: Publicize and Authenticate your eepSite</h3>
<h4 id="step-four-back-to-tls-for-a-moment">Step four: Back to TLS for a moment</h4>
<h4 id="place-your-b32i2p-link-on-your-clearnet-page">Place your .b32.I2P link on your clearnet page</h4>
<h4 id="distributing-an-addresshelper-link-from-your-clearnet-page">Distributing an &quot;Addresshelper&quot; link from your clearnet page</h4>
<h4 id="distributing">Distributing</h4>

<h1 id="see-also">See Also:</h1>
<p>Most of the security issues of hosting Tor hidden services also apply to I2P. It would be advisable to take advantage of their resources as well as this one:</p>
<h2 id="misc-links">Misc Links</h2>
<ul>
<li><a href="https://2019.www.torproject.org/docs/tor-onion-service.html.en">Official Guide</a></li>
<li><a href="https://riseup.net/en/security/network-security/tor/onionservices-best-practices">Riseup best Practices</a></li>
<li><a href="https://blog.0day.rocks/securing-a-web-hidden-service-89d935ba1c1d">Blog about config fails</a></li>
<li><a href="https://www.whonix.org/wiki/Onion_Services">Whonix Docs Onion Service</a></li>
<li><a href="https://old.reddit.com/r/TOR/comments/bd5aqc/can_my_server_trade_off_privacy_for_speed_and/">Reddit thread</a></li>
</ul>
<h2 id="stack-exchange">Stack Exchange</h2>
<ul>
<li><a href="https://tor.stackexchange.com/questions/16680/hosting-site-as-hidden-service">Hosting clearnet site as onion service</a></li>
<li><a href="https://tor.stackexchange.com/questions/58/securely-hosting-a-tor-hidden-service-site">Securing a Tor Hidden Service</a></li>
<li><a href="https://tor.stackexchange.com/questions/6014/does-hosting-a-tor-hidden-service-also-on-clearnet-dns-reduce-privacy-security-f">Effects of hosting hidden and non-hidden services</a></li>
</ul>
<h2 id="clearnet-web-sites-announcing-public-services">Clearnet Web Sites announcing Public Services:</h2>
<ul>
<li><a href="https://www.propublica.org/nerds/a-more-secure-and-anonymous-propublica-using-tor-hidden-services">Propublica</a></li>
<li><a href="https://meta.wikimedia.org/wiki/Grants_talk:IdeaLab/A_Tor_Onion_Service_for_Wikipedia">Wikipedia Proposal</a></li>
</ul>
